# Configuration file for an ASM-based simulation.
# It defines, for each model and for the environment,
# the runtime ASM model paths, host and registry addresses, ZeroMQ endpoints,
# port pools used for publisher sockets, subscribed roles, and the environment
# functions together with their concrete test.
# These specifications are used by the runtime to instantiate the models,
# configure the communication channels among them, and drive the environment
# behaviour during the simulation; publisher socket fields may be left blank
# to allow dynamic port assignment at startup.

# MODELS AND COMPOSITION

# List of concrete models that can be instantiated by the runtime.
models=producer,consumer,environment

# Mapping between abstract instance names
# and concrete model names defined in this configuration.
# In this setup, m1 is the producer and m2 is the consumer.
composition.instances=m1=producer,m2=consumer

# Composition operator and formula.
# PIPE denotes a unidirectional pipe: outputs of the left instance
# become inputs of the right instance.
composition.operator=PIPE
composition.formula=m1 | m2

#COMMONS
common.HOST=127.0.0.1
common.REGISTRY_ADDR=tcp://127.0.0.1:5570
common.PORT_POOL.producer=5561,5562,5563
common.PORT_POOL.consumer=5564,5565,5566


#PRODUCER 
producer.RUNTIME_MODEL_PATH=resources/models/producerconsumer/producer.asm
producer.ZMQ_PUB_SOCKET= 
producer.SUB_ROLES=
producer.ASM_ENVIRONMENT_FUNCTIONS=trigger,sharedValue
producer.ASM_ENVIRONMENT_ADDRESS=tcp://127.0.0.1:5563    
producer.CONSOLE_INPUT_FUNCTIONS=consoleInput,1

#CONSUMER
consumer.RUNTIME_MODEL_PATH=resources/models/producerconsumer/consumer.asm
consumer.ZMQ_PUB_SOCKET=
consumer.SUB_ROLES=
consumer.ASM_ENVIRONMENT_FUNCTIONS=sharedValue
consumer.ASM_ENVIRONMENT_ADDRESS=tcp://127.0.0.1:5563


# ENVIRONMENT
environment.address=tcp://*:5563
# ms pause between sends
environment.pause=3000
environment.env_functions=trigger,sharedValue
# each key = a topic name, value = list of message-values
environment.trigger=1,4,7,1
environment.sharedValue=1,2